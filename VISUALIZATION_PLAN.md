# 数据可视化方案 & 前端布局规划

## 第一部分：可视化方案设计

### 1. 核心可视化图表需求

#### 1.1 **基础概览类** (Dashboard首屏)

| 图表类型 | 展示内容 | 数据来源 | 优先级 |
|---------|---------|--------|-------|
| **数据卡片** (KPI Cards) | 总问题数、总浏览数、总点赞数、总回答数 | basic_stats | ⭐⭐⭐⭐⭐ |
| **环形图** (Pie Chart) | 各用户提问占比 Top 5 | user_analysis | ⭐⭐⭐⭐ |
| **排行榜** (Leaderboard) | 最热门问题 Top 10（按浏览数） | top_questions | ⭐⭐⭐⭐⭐ |

#### 1.2 **时间序列类** (趋势分析)

| 图表类型 | 展示内容 | 应用场景 | 数据来源 |
|---------|---------|--------|---------|
| **折线图** (Line Chart) | 月度问题数、浏览数、点赞数趋势 | 内容趋势分析 | time_analysis |
| **柱状图** (Bar Chart) | 月度各指标对比 | 月度表现评估 | time_analysis |
| **热力图** (Heatmap) | 按月/周的数据强度 | 活跃度分布 | time_analysis |

#### 1.3 **用户维度类** (用户分析)

| 图表类型 | 展示内容 | 应用场景 | 数据来源 |
|---------|---------|--------|---------|
| **横向柱状图** | Top 10用户的提问数、浏览数、点赞数 | 用户贡献识别 | user_analysis |
| **散点图** | 用户声望 vs 提问数/浏览数 | 用户等级分析 | user_analysis |
| **树图** (Treemap) | 用户贡献占比（提问数加权） | 用户生态展示 | user_analysis |

#### 1.4 **标签类** (内容分类)

| 图表类型 | 展示内容 | 应用场景 | 数据来源 |
|---------|---------|--------|---------|
| **词云图** (Word Cloud) | Top 50热门标签 | 内容主题一览 | tag_analysis |
| **柱状图** | Top 15标签频率 | 内容分类排序 | tag_analysis |
| **网络图** (Network) | 标签共现关系（可选） | 标签关联发现 | tag_analysis |

#### 1.5 **问题质量类** (内容评估)

| 图表类型 | 展示内容 | 应用场景 | 数据来源 |
|---------|---------|--------|---------|
| **直方图** (Histogram) | 浏览数分布 | 问题热度分布 | basic_stats |
| **箱线图** (Box Plot) | 浏览数/点赞数/回答数分布 | 异常值识别 | basic_stats |
| **散点图** | 浏览数 vs 回答数 | 问题难度评估 | - |

---

## 第二部分：前端布局设计

### 2. 整体布局架构

```
┌─────────────────────────────────────────────────────────────┐
│                      顶部导航栏 (Header)                      │
│  Logo | 标题: 天工开物问答站数据分析 | 数据刷新 | 设置 | 导出  │
└─────────────────────────────────────────────────────────────┘

┌──────────────────┬───────────────────────────────────────────┐
│                  │                                           │
│   左侧导航栏      │         主内容区域 (Main Content)          │
│ (Sidebar)        │                                           │
│                  │  ┌─────────────────────────────────────┐ │
│ • Dashboard      │  │   Dashboard / 首屏概览              │ │
│ • 趋势分析       │  │   (KPI Cards + 热门问题 + 排行榜)   │ │
│ • 用户分析       │  │                                     │ │
│ • 内容分析       │  └─────────────────────────────────────┘ │
│ • 标签云         │                                           │
│ • 数据表         │  (其他页面内容)                           │
│ • 导出           │                                           │
│                  │                                           │
└──────────────────┴───────────────────────────────────────────┘

                       底部页脚 (Footer)
```

### 3. 各页面详细布局

#### 3.1 Dashboard (首页)

**栅格布局** (响应式 12列网格)：

```
┌────────────────────────────────────────────────────────────┐
│ 数据更新时间: 2025-01-07 10:30 | 数据量: 456条 | 刷新 | 导出  │
├────────────────────────────────────────────────────────────┤

【第一行 - KPI卡片区】(12列 = 4列×3)
┌──────────────┬──────────────┬──────────────┐
│ 总问题数     │ 总浏览数     │ 总点赞数     │
│    456       │   45,680     │    2,345     │
│ ↑ 12%/周     │ ↑ 8%/周      │ ↑ 15%/周     │
└──────────────┴──────────────┴──────────────┘

┌──────────────┬──────────────┬──────────────┐
│ 总回答数     │ 平均浏览数   │ 总活跃用户   │
│    1,234     │    100.1     │     89       │
│ ↑ 5%/周      │ ↑ 2%/周      │ ↑ 3%/周      │
└──────────────┴──────────────┴──────────────┘

【第二行 - 趋势图表区】(12列)
┌─────────────────────────────────────────────┐
│ 最近30天趋势分析 (折线图 / 柱状图切换)      │
│ [折线图展示：问题数、浏览数、点赞数变化]    │
│ 图表高度: 300px                            │
└─────────────────────────────────────────────┘

【第三行 - 双列布局】(12列 = 6列×2)
┌──────────────────────┬──────────────────────┐
│ 最热门问题 (Top 10)   │ Top 5活跃用户        │
│ [排行榜列表]         │ [用户排行榜]         │
│ 高度: 350px          │ 高度: 350px          │
└──────────────────────┴──────────────────────┘

【第四行 - 三列布局】(12列 = 4列×3)
┌────────────────┬────────────────┬────────────────┐
│ 标签云展示     │ 问题分类分布   │ 用户贡献占比   │
│ (Word Cloud)   │ (Pie Chart)    │ (Treemap)      │
│ 高度: 300px    │ 高度: 300px    │ 高度: 300px    │
└────────────────┴────────────────┴────────────────┘
```

#### 3.2 趋势分析页面

**主要展示**：
- 时间范围选择器（周/月/自定义）
- 指标多选（问题数、浏览数、点赞数、回答数）
- 大型折线图 (500px高) - 多条线
- 月度对比柱状图
- 数据表格 (可排序、可筛选)

```
┌────────────────────────────────────────────────────────────┐
│ 时间范围: [周] [月] [自定义]  从: 2024-12-01 至: 2025-01-07 │
│ 指标: ☑问题数 ☑浏览数 ☑点赞数 ☑回答数                      │
├────────────────────────────────────────────────────────────┤
│                  [大型趋势折线图]                           │
│                  (高度: 500px)                             │
├────────────────────────────────────────────────────────────┤
│  月度统计表                                                │
│  ┌─────────┬──────┬──────┬──────┬──────┐                 │
│  │  月份   │ 问题 │ 浏览 │ 点赞 │ 回答 │                 │
│  ├─────────┼──────┼──────┼──────┼──────┤                 │
│  │ Jan2025 │ 145  │15000 │  850 │  450 │                 │
│  │ Dec2024 │ 120  │12000 │  700 │  380 │                 │
│  └─────────┴──────┴──────┴──────┴──────┘                 │
└────────────────────────────────────────────────────────────┘
```

#### 3.3 用户分析页面

**主要展示**：
- 用户统计概览（总用户数、平均提问数等）
- 用户等级分布（散点图）
- Top 10用户详情表格
- 用户贡献Treemap

```
┌────────────────────────────────────────────────────────────┐
│ 用户总数: 89 | 平均提问: 5.1 | 最活跃用户: 张三 | 最高声望: 李四 │
├────────────────────────────────────┬────────────────────────┤
│ 用户等级分布 (散点图)              │ 用户贡献占比 (Treemap) │
│ X轴: 提问数 Y轴: 浏览数总和       │ 按提问数加权            │
│ 高度: 350px                       │ 高度: 350px           │
└────────────────────────────────────┴────────────────────────┘
│                                                             │
│ 【Top 10活跃用户排行榜】                                     │
│ ┌────┬──────────┬───────┬───────┬───────┬────────┐        │
│ │排名│ 用户名   │ 提问数│ 浏览数│ 点赞数│ 声望值 │        │
│ ├────┼──────────┼───────┼───────┼───────┼────────┤        │
│ │ 1  │ 数据分析师│  15   │ 2100  │  180  │  450   │        │
│ │ 2  │ 工程师小李│  12   │ 1800  │  150  │  380   │        │
│ └────┴──────────┴───────┴───────┴───────┴────────┘        │
└────────────────────────────────────────────────────────────┘
```

#### 3.4 内容分析页面

**主要展示**：
- 问题热度分布（直方图）
- 标签词云（大型）
- 热门标签排行（柱状图）
- 内容质量评估矩阵

```
┌────────────────────────────────────────────────────────────┐
│                                                             │
│  【问题热度分布】              【标签词云】                  │
│  直方图: 浏览数分布            Word Cloud                   │
│  高度: 300px                  高度: 300px                  │
│                                                             │
├────────────────────────────────────────────────────────────┤
│                                                             │
│  【热门标签Top 15】 (柱状图)                               │
│  高度: 350px                                               │
│  标签1 ████████░░░░░  45次                                 │
│  标签2 ███████░░░░░░░░ 38次                                │
│  ...                                                       │
│                                                             │
├────────────────────────────────────────────────────────────┤
│                                                             │
│  【内容质量矩阵】 (散点图)                                   │
│  X轴: 浏览数 Y轴: 回答数                                    │
│  高度: 300px                                               │
│  每个点 = 一个问题，颜色 = 点赞数                            │
│                                                             │
└────────────────────────────────────────────────────────────┘
```

#### 3.5 数据表页面

**主要功能**：
- 完整数据表格（支持分页、排序、筛选）
- 列可见性切换
- 数据导出（CSV/Excel/JSON）
- 快速搜索

```
┌────────────────────────────────────────────────────────────┐
│ 搜索: [快速搜索框]   ☐ 高浏览 ☐ 无回答 ☐高点赞  | 导出 | 刷新 │
├────────────────────────────────────────────────────────────┤
│ 显示 [10▼] 条数据                                 1-10/456  │
├────────────────────────────────────────────────────────────┤
│ ┌──┬────┬──────────────┬────────┬────────┬────────┬────────┐
│ │☐ │ ID │    标题      │ 浏览数 │ 点赞数 │ 回答数 │ 用户   │
│ ├──┼────┼──────────────┼────────┼────────┼────────┼────────┤
│ │☐ │001 │Python编程...│ 1250   │  45    │   8    │张三    │
│ │☐ │002 │数据处理...   │  890   │  32    │   5    │李四    │
│ └──┴────┴──────────────┴────────┴────────┴────────┴────────┘
│ 上一页 [1] [2] [3] ... [46] 下一页                          │
└────────────────────────────────────────────────────────────┘
```

---

## 第三部分：技术方案选择

### 4. 推荐技术栈

#### 4.1 前端框架选择

| 选项 | 优点 | 缺点 | 推荐度 |
|-----|------|------|-------|
| **React + ECharts** | 组件化、生态成熟、图表丰富 | 学习曲线陡 | ⭐⭐⭐⭐⭐ |
| **Vue 3 + ECharts** | 易上手、体验好、国内流行 | 社区资源相对少 | ⭐⭐⭐⭐⭐ |
| **Svelte + Chart.js** | 轻量、性能好、语法简洁 | 生态小 | ⭐⭐⭐ |

**推荐**：**Vue 3 + ECharts + Element Plus** 或 **React + Recharts + Ant Design**

#### 4.2 图表库选择

| 库 | 优点 | 适用图表 | 推荐度 |
|----|------|--------|-------|
| **ECharts** | 功能全、配置灵活、文档完善 | 全部 | ⭐⭐⭐⭐⭐ |
| **Recharts** | React友好、简单易用 | 基础图表 | ⭐⭐⭐⭐ |
| **D3.js** | 强大、自定义程度高 | 复杂图表 | ⭐⭐⭐ |
| **Plotly** | 交互性好、类型丰富 | 全部 | ⭐⭐⭐⭐ |

**推荐**：**ECharts** (功能最完整) 或 **Recharts** (如选React)

#### 4.3 UI框架选择

| 框架 | 风格 | 组件丰富度 | 推荐度 |
|-----|------|----------|-------|
| **Element Plus** | 简洁、专业 | 很高 | ⭐⭐⭐⭐⭐ (Vue) |
| **Ant Design** | 企业级、规范 | 很高 | ⭐⭐⭐⭐⭐ (React) |
| **Vuetify** | Material设计 | 高 | ⭐⭐⭐⭐ (Vue) |
| **Material-UI** | Material设计 | 高 | ⭐⭐⭐⭐ (React) |

### 5. 推荐完整技术栈

#### 方案A (Vue技术栈 - 推荐新手)
```
前端框架:  Vue 3
UI库:      Element Plus
图表库:    ECharts
状态管理: Pinia
数据获取: axios
构建工具: Vite
```

#### 方案B (React技术栈 - 推荐生产)
```
前端框架:  React 18
UI库:      Ant Design 5
图表库:    ECharts 或 Recharts
状态管理: Zustand / Redux Toolkit
数据获取: axios / TanStack Query
构建工具: Vite / Create React App
```

---

## 第四部分：交互设计

### 6. 核心交互功能

#### 6.1 筛选与钻取
- **时间范围筛选**：周/月/季/年/自定义
- **标签筛选**：多选热门标签
- **用户筛选**：按声望、提问数筛选
- **数据钻取**：从Dashboard → 详情页

#### 6.2 数据对比
- **同期对比**：本周vs上周、本月vs上月
- **指标对比**：浏览数vs点赞数、问题数vs回答数
- **用户对比**：选择2-3个用户进行对比

#### 6.3 实时更新
- **数据刷新**：手动 + 定时刷新（可配置间隔）
- **加载状态**：Skeleton Loading / 进度条
- **错误处理**：网络错误提示 + 重试机制

#### 6.4 导出功能
- **支持格式**：PDF / Excel / PNG图表
- **导出范围**：整个页面 / 单个图表
- **定时导出**：支持日/周/月度定时任务

---

## 第五部分：色彩与设计规范

### 7. 设计规范

#### 7.1 色彩方案

| 类型 | 颜色 | 用途 |
|-----|------|------|
| **主色** | #0066CC (蓝) | 按钮、链接、强调 |
| **成功** | #52C41A (绿) | 上升、正面 |
| **警告** | #FAAD14 (黄) | 预警、注意 |
| **失败** | #FF4D4F (红) | 下降、错误 |
| **辅助** | #666666 (灰) | 文本、边框 |
| **背景** | #F5F7FA (浅灰) | 页面背景 |

#### 7.2 图表配色

推荐使用**ECharts官方主题**或自定义调色板：

```javascript
colors: [
  '#0066CC',  // 蓝
  '#52C41A',  // 绿
  '#FAAD14',  // 黄
  '#FF4D4F',  // 红
  '#1890FF',  // 亮蓝
  '#13C2C2',  // 青
  '#EB2F96',  // 紫
  '#FA8C16',  // 橙
]
```

#### 7.3 排版规范

| 用途 | 大小 | 粗细 | 行高 |
|-----|------|------|------|
| **页面标题** | 28px | Bold | 1.35 |
| **卡片标题** | 16px | 600 | 1.5 |
| **正文** | 14px | 400 | 1.6 |
| **小文本** | 12px | 400 | 1.5 |

#### 7.4 间距规范

- 页面内边距: 20px
- 卡片间距: 16px
- 组件内部间距: 8px/12px

---

## 第六部分：响应式设计

### 8. 断点设计

| 设备 | 宽度 | 布局 |
|-----|------|------|
| **手机** | < 768px | 单列堆叠 |
| **平板** | 768px - 1024px | 双列 |
| **桌面** | ≥ 1024px | 三列及以上 |

### 9. 移动适配

- KPI卡片横向滚动（5个变1-2个）
- 表格简化显示（隐藏次要列）
- 图表高度降低（200-300px）
- 触摸友好的按钮 (≥44px)

---

## 第七部分：实现优先级

### 10. MVP (最小可行产品) 开发阶段

#### **第一阶段** (基础展示，周期1-2周)
- ✅ Dashboard概览页
- ✅ KPI卡片
- ✅ 最热门问题排行
- ✅ 基础数据表

#### **第二阶段** (趋势分析，周期1-2周)
- ✅ 趋势图表（折线图）
- ✅ 月度统计表
- ✅ 时间范围筛选

#### **第三阶段** (用户分析，周期1-2周)
- ✅ 用户排行榜
- ✅ 用户分布散点图
- ✅ 用户贡献Treemap

#### **第四阶段** (内容分析，周期1-2周)
- ✅ 标签词云
- ✅ 热门标签排行
- ✅ 问题分类分布

#### **第五阶段** (高级功能，周期1周)
- ✅ 数据导出
- ✅ 高级筛选
- ✅ 对比分析

---

## 第八部分：数据流与API规范

### 11. 前后端API设计

#### 11.1 主要接口

```
GET /api/dashboard/stats
返回: { total_questions, total_views, total_likes, total_answers }

GET /api/dashboard/top-questions?limit=10
返回: [ { id, title, views, likes, answers, time } ]

GET /api/dashboard/top-users?limit=5
返回: [ { user, question_count, total_views, reputation } ]

GET /api/trends/monthly?start_date=2024-12-01&end_date=2025-01-07
返回: [ { month, question_count, views, likes, answers } ]

GET /api/users/analysis
返回: { total_users, avg_questions, top_users: [...] }

GET /api/tags/top?limit=15
返回: [ { tag, count } ]

GET /api/questions/data?page=1&limit=20&sort=views
返回: { data: [...], total, page, limit }
```

#### 11.2 数据过滤参数

```javascript
// 支持的查询参数
{
  start_date: "2024-12-01",      // 开始日期
  end_date: "2025-01-07",        // 结束日期
  tags: "Python,数据分析",        // 标签筛选
  min_views: 100,                 // 最小浏览数
  sort_by: "views",              // 排序字段
  order: "desc",                 // 排序方向
  page: 1,                       // 分页
  limit: 20                      // 每页数量
}
```

---

## 总结

### 推荐配置

| 方面 | 推荐方案 |
|-----|--------|
| **前端框架** | Vue 3 + Vite |
| **UI库** | Element Plus |
| **图表库** | ECharts |
| **开发周期** | 4-6周完成MVP |
| **首屏图表** | KPI卡片 + 热门问题 + 用户排行 + 趋势图 |
| **核心功能** | Dashboard + 趋势 + 用户 + 内容分析 + 数据表 |

---

**版本**：1.0
**更新**：2025-01-07
